/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */

!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t="undefined"!=typeof globalThis?globalThis:t||self).chroma=r()}(this,(function(){"use strict";for(var t=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=1),t<r?r:t>n?n:t},r=t,n={},e=0,o=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];e<o.length;e+=1){var a=o[e];n["[object "+a+"]"]=a.toLowerCase()}var i=function(t){return n[Object.prototype.toString.call(t)]||"object"},u=i,c=i,l=(Math.PI,function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=r(t[n],0,255)):3===n&&(t[n]=r(t[n],0,1));return t}),f=i,h=function(t,r){return void 0===r&&(r=null),t.length>=3?Array.prototype.slice.call(t):"object"==u(t[0])&&r?r.split("").filter((function(r){return void 0!==t[0][r]})).map((function(r){return t[0][r]})):t[0]},p=function(t){if(t.length<2)return null;var r=t.length-1;return"string"==c(t[r])?t[r].toLowerCase():null},s={format:{},autodetect:[]},g=p,b=l,v=f,d=s,y=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=this;if("object"===v(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var e=g(t),o=!1;if(!e){o=!0,d.sorted||(d.autodetect=d.autodetect.sort((function(t,r){return r.p-t.p})),d.sorted=!0);for(var a=0,i=d.autodetect;a<i.length;a+=1){var u=i[a];if(e=u.test.apply(u,t))break}}if(!d.format[e])throw new Error("unknown format: "+t);var c=d.format[e].apply(null,o?t:t.slice(0,-1));n._rgb=b(c),3===n._rgb.length&&n._rgb.push(1)};y.prototype.toString=function(){return"function"==v(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var w=y,m=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(m.Color,[null].concat(t)))};m.Color=w,m.version="2.4.2";var _=m,M=h,x=p,F=Math.round,k=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=M(t,"rgba"),e=n[0],o=n[1],a=n[2],i=n[3],u=x(t)||"auto";void 0===i&&(i=1),"auto"===u&&(u=i<1?"rgba":"rgb");var c=(e=F(e))<<16|(o=F(o))<<8|(a=F(a)),l="000000"+c.toString(16);l=l.substr(l.length-6);var f="0"+F(255*i).toString(16);switch(f=f.substr(f.length-2),u.toLowerCase()){case"rgba":return"#"+l+f;case"argb":return"#"+f+l;default:return"#"+l}},A=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,j=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,N=function(t){if(t.match(A)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var r=parseInt(t,16);return[r>>16,r>>8&255,255&r,1]}if(t.match(j)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},C=_,E=w,S=f,I=s,L=k;E.prototype.hex=function(t){return L(this._rgb,t)},C.hex=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(E,[null].concat(t,["hex"])))},I.format.hex=N,I.autodetect.push({p:4,test:function(t){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];if(!r.length&&"string"===S(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var O=_,X=w,Y=s,Z=h,K=f,P=Math.round;X.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(P)},X.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(r,n){return n<3?!1===t?r:P(r):r}))},O.rgb=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(X,[null].concat(t,["rgb"])))},Y.format.rgb=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=Z(t,"rgba");return void 0===n[3]&&(n[3]=1),n},Y.autodetect.push({p:3,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=Z(t,"rgba"),"array"===K(t)&&(3===t.length||4===t.length&&"number"==K(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var T=w,$=f;T.prototype.alpha=function(t,r){return void 0===r&&(r=!1),void 0!==t&&"number"===$(t)?r?(this._rgb[3]=t,this):new T([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};var q={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},B=q,D=h,R=Math.pow,U=function(t){return(t/=255)<=.04045?t/12.92:R((t+.055)/1.055,2.4)},z=function(t){return t>B.t3?R(t,1/3):t/B.t2+B.t0},G=function(t,r,n){return t=U(t),r=U(r),n=U(n),[z((.4124564*t+.3575761*r+.1804375*n)/B.Xn),z((.2126729*t+.7151522*r+.072175*n)/B.Yn),z((.0193339*t+.119192*r+.9503041*n)/B.Zn)]},H=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=D(t,"rgb"),e=n[0],o=n[1],a=n[2],i=G(e,o,a),u=i[0],c=i[1],l=i[2],f=116*c-16;return[f<0?0:f,500*(u-c),200*(c-l)]},J=q,Q=h,V=Math.pow,W=function(t){return 255*(t<=.00304?12.92*t:1.055*V(t,1/2.4)-.055)},tt=function(t){return t>J.t1?t*t*t:J.t2*(t-J.t0)},rt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n,e,o,a=(t=Q(t,"lab"))[0],i=t[1],u=t[2];return e=(a+16)/116,n=isNaN(i)?e:e+i/500,o=isNaN(u)?e:e-u/200,e=J.Yn*tt(e),n=J.Xn*tt(n),o=J.Zn*tt(o),[W(3.2404542*n-1.5371385*e-.4985314*o),W(-.969266*n+1.8760108*e+.041556*o),W(.0556434*n-.2040259*e+1.0572252*o),t.length>3?t[3]:1]},nt=h,et=f,ot=_,at=w,it=s,ut=H;at.prototype.lab=function(){return ut(this._rgb)},ot.lab=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(at,[null].concat(t,["lab"])))},it.format.lab=rt,it.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=nt(t,"lab"),"array"===et(t)&&3===t.length)return"lab"}});var ct=w,lt=q;ct.prototype.darken=function(t){void 0===t&&(t=1);var r=this.lab();return r[0]-=lt.Kn*t,new ct(r,"lab").alpha(this.alpha(),!0)},ct.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},ct.prototype.darker=ct.prototype.darken,ct.prototype.brighter=ct.prototype.brighten,w.prototype.get=function(t){var r=t.split("."),n=r[0],e=r[1],o=this[n]();if(e){var a=n.indexOf(e)-("ok"===n.substr(0,2)?2:0);if(a>-1)return o[a];throw new Error("unknown channel "+e+" in mode "+n)}return o};var ft=w,ht=f,pt=Math.pow;ft.prototype.luminance=function(t){if(void 0!==t&&"number"===ht(t)){if(0===t)return new ft([0,0,0,this._rgb[3]],"rgb");if(1===t)return new ft([255,255,255,this._rgb[3]],"rgb");var r=this.luminance(),n=20,e=function(r,o){var a=r.interpolate(o,.5,"rgb"),i=a.luminance();return Math.abs(t-i)<1e-7||!n--?a:i>t?e(r,a):e(a,o)},o=(r>t?e(new ft([0,0,0]),this):e(this,new ft([255,255,255]))).rgb();return new ft(o.concat([this._rgb[3]]))}return st.apply(void 0,this._rgb.slice(0,3))};var st=function(t,r,n){return.2126*(t=gt(t))+.7152*(r=gt(r))+.0722*(n=gt(n))},gt=function(t){return(t/=255)<=.03928?t/12.92:pt((t+.055)/1.055,2.4)},bt=w,vt=w,dt=Math.sqrt,yt=Math.pow,wt=Math.min,mt=Math.max,_t=Math.atan2,Mt=Math.abs,xt=Math.cos,Ft=Math.sin,kt=Math.exp,At=Math.PI,jt=w,Nt=_;return Nt.contrast=function(t,r){t=new bt(t),r=new bt(r);var n=t.luminance(),e=r.luminance();return n>e?(n+.05)/(e+.05):(e+.05)/(n+.05)},Nt.deltaE=function(t,r,n,e,o){void 0===n&&(n=1),void 0===e&&(e=1),void 0===o&&(o=1);var a=function(t){return 360*t/(2*At)},i=function(t){return 2*At*t/360};t=new vt(t),r=new vt(r);var u=Array.from(t.lab()),c=u[0],l=u[1],f=u[2],h=Array.from(r.lab()),p=h[0],s=h[1],g=h[2],b=(c+p)/2,v=(dt(yt(l,2)+yt(f,2))+dt(yt(s,2)+yt(g,2)))/2,d=.5*(1-dt(yt(v,7)/(yt(v,7)+yt(25,7)))),y=l*(1+d),w=s*(1+d),m=dt(yt(y,2)+yt(f,2)),_=dt(yt(w,2)+yt(g,2)),M=(m+_)/2,x=a(_t(f,y)),F=a(_t(g,w)),k=x>=0?x:x+360,A=F>=0?F:F+360,j=Mt(k-A)>180?(k+A+360)/2:(k+A)/2,N=1-.17*xt(i(j-30))+.24*xt(i(2*j))+.32*xt(i(3*j+6))-.2*xt(i(4*j-63)),C=A-k;C=Mt(C)<=180?C:A<=k?C+360:C-360,C=2*dt(m*_)*Ft(i(C)/2);var E=p-c,S=_-m,I=1+.015*yt(b-50,2)/dt(20+yt(b-50,2)),L=1+.045*M,O=1+.015*M*N,X=30*kt(-yt((j-275)/25,2)),Y=-(2*dt(yt(M,7)/(yt(M,7)+yt(25,7))))*Ft(2*i(X)),Z=dt(yt(E/(n*I),2)+yt(S/(e*L),2)+yt(C/(o*O),2)+Y*(S/(e*L))*(C/(o*O)));return mt(0,wt(100,Z))},Nt.valid=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];try{return new(Function.prototype.bind.apply(jt,[null].concat(t))),!0}catch(t){return!1}},Nt}));
